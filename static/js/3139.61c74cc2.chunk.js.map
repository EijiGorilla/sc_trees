{"version":3,"file":"static/js/3139.61c74cc2.chunk.js","mappings":"qIAIyE,MAAMA,EAAEC,WAAAA,GAAcC,KAAKC,kBAAkB,IAAIC,GAAG,CAAC,0BAAMC,CAAqBL,EAAEM,GAAG,MAAMC,EAAEL,KAAKC,kBAAkBK,IAAIR,GAAG,GAAGO,EAAE,OAAOA,EAAE,MAAME,QAAQC,EAAAA,EAAAA,GAAEV,EAAEM,GAAG,OAAOJ,KAAKC,kBAAkBQ,IAAIX,EAAES,GAAGA,CAAC,E,mHCAoBG,eAAeC,EAAEJ,EAAET,GAAE,IAAAc,EAAAC,EAAC,MAAML,GAAEM,EAAAA,EAAAA,IAAEP,GAAG,IAAIC,EAAE,MAAM,IAAIO,EAAAA,EAAE,cAAc,6BAA6B,MAAMV,EAAE,IAAIP,EAAEkB,eAAeR,EAAES,IAAIC,KAAKC,QAAkB,QAAXP,EAACJ,EAAEY,gBAAQ,IAAAR,EAAAA,OAAE,GAAQ,GAAmB,QAAhBC,EAAAR,EAAEgB,sBAAc,IAAAR,IAAhBR,EAAEgB,qBAAmTX,eAAiBH,GAAG,MAAMT,SAASwB,EAAEf,IAAIgB,cAAc,IAAIzB,EAAE,OAAO,KAAK,MAAMiB,EAAE,IAAIS,EAAAA,QAAE,CAACC,GAAG3B,EAAE4B,OAAOnB,EAAEmB,SAASZ,QAAsWJ,eAAiBK,GAAG,MAAMD,EAAG,OAADP,EAAAA,SAAC,IAADA,EAAAA,QAAC,EAADA,EAAAA,GAAGoB,eAAeZ,EAAEC,gBAAgB,GAAI,OAADF,QAAC,IAADA,GAAAA,EAAGc,gBAAgB,OAAOd,EAAEc,gBAAgB,MAAMvB,EAAEU,EAAEC,eAAea,QAAQ,kBAAkB,MAAM,QAAQ,IAAI,MAAMtB,SAAST,EAAAA,EAAAA,GAAEO,EAAE,CAACyB,MAAM,CAACC,EAAE,QAAQC,aAAa,OAAOC,OAAOlB,EAAEkB,UAAUC,KAAKN,gBAAgB,GAAGrB,EAAE,OAAOA,CAAC,CAAC,MAAMiB,IAAGhB,EAAAA,EAAAA,IAAEgB,EAAE,CAAC,OAAO,IAAI,CAA1pBW,CAAE5B,GAAG,MAAMO,IAAIC,EAAEqB,OAAO,IAAI/B,EAAAA,EAAE,CAACY,IAAIH,KAAK,IAAI,OAAOC,EAAEsB,KAAK,CAACJ,OAAO1B,EAAE0B,QAAQ,CAAC,MAAMtB,GAAG,OAAOH,EAAAA,EAAAA,IAAEG,GAAG,IAAI,CAAC,CAA1fP,CAAEC,IAAG,MAAMA,EAAEgB,eAAe,OAAOU,EAAE1B,EAAEW,eAAea,QAAQ,eAAe,kBAAkBxB,GAAG,MAAMmB,QAAqoDd,eAAgB4B,GAA6B,IAA3BjB,eAAed,EAAE0B,OAAOnC,GAAEwC,EAAE,IAAI/B,EAAE,OAAO,KAAK,IAAI,MAAMQ,SAASR,EAAEgC,kBAAkB,CAACC,iBAAiB,kBAAkBC,UAAU,WAAW,CAACR,OAAOnC,KAAK4C,MAAMnC,GAAG,oBAAoBA,EAAEoC,QAAQ,KAAK,IAAI5B,EAAE,OAAO,KAAK,MAAMP,EAAE,IAAIgB,EAAAA,QAAE,CAACY,OAAOrB,EAAEqB,OAAOX,GAAGV,EAAEU,KAAK,aAAajB,EAAE6B,OAAO7B,CAAC,CAAC,MAAMO,GAAG,OAAOP,EAAAA,EAAAA,IAAEO,GAAG,IAAI,CAAC,CAAn8D6B,CAAEvC,GAAG,GAAK,OAADmB,QAAC,IAADA,IAAAA,EAAGP,IAAI,MAAM,IAAIF,EAAAA,EAAE,4BAA4B,mEAAmE,MAAMJ,QAAQoB,EAAEP,EAAEP,IAAIZ,GAAG,OAAOM,EAAEkC,WAAWrB,EAAEb,CAAC,CAAgOD,eAAeY,EAAEf,GAAG,GAAGA,EAAEuC,aAAa,OAAOvC,EAAEuC,aAAa,MAAM/B,EAAE,CAACe,MAAM,CAACC,EAAE,OAAOgB,MAAMxC,EAAEmB,QAAQM,aAAa,OAAOC,OAAO1B,EAAE0B,QAAQ,IAAI,MAAMzB,QAAQV,EAAAA,EAAAA,GAAES,EAAES,eAAeD,GAAGR,EAAEuC,aAAatC,EAAE0B,IAAI,CAAC,MAAM3B,EAAEuC,aAAa,CAAC,CAAC,CAAC,OAAOvC,EAAEuC,YAAY,CAA8TpC,eAAeqB,EAAExB,EAAEC,GAAG,MAAMH,GAAES,EAAAA,EAAAA,IAAEP,GAAG,IAAIF,EAAE,MAAM,IAAIU,EAAAA,EAAE,8BAA8B,+BAA+B,MAAMS,EAAEnB,EAAEY,IAAIC,KAAKP,EAAEH,EAAEW,QAAQ,GAAG,MAAMR,EAAE,MAAM,CAACqC,UAAUxB,GAAG,MAAMpB,EAAEkB,EAAEd,GAAG2B,EAAE5B,IAAI,MAAMQ,EAAE,CAACe,MAAM,CAACC,EAAE,QAAQC,aAAa,OAAOiB,SAAS1C,EAAE0B,OAAOzB,EAAEyB,QAAQ,OAAOnC,EAAAA,EAAAA,GAAE0B,EAAET,EAAE,EAAEgB,EAAEI,EAAE,aAAae,OAAO,IAAIf,EAAE,gBAAgBS,EAAEO,SAASC,QAAQC,IAAI,CAACtB,EAAE3B,IAAIkD,EAAG,OAADH,QAAC,IAADA,OAAC,EAADA,EAAGI,OAAOC,EAAEZ,EAAEV,MAAMU,EAAEV,KAAKqB,OAAO,IAAIE,MAAMC,QAAQF,GAAG,MAAM,IAAIG,MAAM,yBAAyB,GAAGF,MAAMC,QAAQJ,IAAG,IAAI,IAAIxD,EAAE,EAAEA,EAAE8D,KAAKC,IAAIP,EAAEQ,OAAON,EAAEM,QAAQhE,IAAK,GAAGwD,EAAExD,GAAG2B,KAAKd,EAAE,MAAM,CAACqC,UAAUxB,EAAEL,QAAQqC,EAAE1D,GAAG2B,SAAS,GAAG,MAAMd,GAAGA,EAAE6C,EAAEM,OAAO,MAAM,CAACd,UAAUxB,EAAEL,QAAQqC,EAAE7C,GAAGc,IAAI,MAAM,IAAIkC,MAAM,8CAA8C,C,yGCA1mE,SAASnD,EAAEV,GAAG,MAAMU,EAAE,CAACiB,GAAG3B,EAAE2B,GAAGsC,KAAKjE,EAAEiE,MAAM,MAAM,2BAA2BjE,EAAE6C,OAAOnC,EAAEwD,UAAU,wBAAwBxD,CAAC,CAACE,eAAeL,EAAEP,EAAEO,EAAEE,GAAE,IAAA0D,EAAAC,EAAC,GAAG,OAAO,QAAHD,EAAEnE,SAAC,IAAAmE,OAAA,EAADA,EAAGV,SAAQ,OAAO,QAAHW,EAAEpE,SAAC,IAAAoE,OAAA,EAADA,EAAGC,QAAO,KAAAC,EAAAC,EAAC,MAAM1D,QAAQJ,EAAEJ,qBAAqBE,IAAIP,EAAEA,GAAG,CAAC,GAAGyD,OAAOzD,EAAEyD,SAAS,OAAD5C,QAAC,IAADA,GAAS,QAARyD,EAADzD,EAAG4C,cAAM,IAAAa,OAAA,EAATA,EAAWE,IAAI9D,IAAGV,EAAEqE,OAAOrE,EAAEqE,SAAS,OAADxD,QAAC,IAADA,GAAS,QAAR0D,EAAD1D,EAAGwD,cAAM,IAAAE,OAAA,EAATA,EAAWC,IAAI9D,GAAE,CAAC,OAAOV,CAAC,CAAC,SAASS,EAAET,GAAG,MAAMU,EAAEV,EAAEyD,OAAO,GAAI,OAAD/C,QAAC,IAADA,GAAAA,EAAGsD,OAAO,OAAOtD,EAAE,GAAGiB,GAAG,MAAMpB,EAAEP,EAAEqE,OAAO,OAAQ,OAAD9D,QAAC,IAADA,GAAAA,EAAGyD,OAAOzD,EAAE,GAAGoB,GAAG,IAAI,CAAC,SAASd,EAAEb,GAAE,IAAAyE,EAAAC,EAAAC,EAAAC,EAAC,OAAwB,QAAlBH,EAAE,OAADzE,QAAC,IAADA,GAAS,QAAR0E,EAAD1E,EAAGyD,cAAM,IAAAiB,OAAA,EAATA,EAAWV,cAAM,IAAAS,EAAAA,EAAE,IAAqB,QAApBE,EAAI,OAAD3E,QAAC,IAADA,GAAS,QAAR4E,EAAD5E,EAAGqE,cAAM,IAAAO,OAAA,EAATA,EAAWZ,cAAM,IAAAW,EAAAA,EAAE,EAAE,CAAC,SAAS1D,EAAEjB,GAAE,IAAA6E,EAAC,MAAMnE,EAAE,GAAG,OAAQ,OAADV,QAAC,IAADA,GAAS,QAAR6E,EAAD7E,EAAGyD,cAAM,IAAAoB,GAATA,EAAWC,SAAS9E,IAAI,sBAAsBA,EAAEkE,WAAWxD,EAAEqE,KAAK/E,EAAE2B,GAAG,IAAIjB,CAAC,CAAC,SAASJ,EAAEN,GAAE,IAAAgF,EAAC,OAAQ,OAADhF,QAAC,IAADA,GAAS,QAARgF,EAADhF,EAAGyD,cAAM,IAAAuB,OAAA,EAATA,EAAWC,QAAQzC,IAAA,IAAE0B,UAAUlE,GAAEwC,EAAA,MAAG,yBAAyBxC,CAAC,IAAGwE,KAAKU,IAAA,IAAEvD,GAAG3B,GAAEkF,EAAA,OAAGlF,CAAC,GAAE,CAACY,eAAec,EAAEnB,EAAEE,EAAEI,GAAE,IAAAsE,EAAAC,EAAC,GAAK,OAAD7E,QAAC,IAADA,IAAAA,EAAGY,IAAI,OAAQ,QAARgE,EAAO1E,SAAC,IAAA0E,EAAAA,EAAE,CAAC,EAAE,GAAI,QAADC,EAAA3E,SAAC,IAAA2E,IAAD3E,EAAI,CAAC,IAAGA,EAAEgD,OAAO,KAAA4B,EAAC,MAAMrF,QAAQa,EAAER,qBAAqBE,EAAEY,KAAKV,EAAEgD,OAAe,QAAT4B,EAACrF,EAAEyD,cAAM,IAAA4B,OAAA,EAARA,EAAUb,IAAI9D,EAAE,CAAC,MAAMwC,UAAUjC,EAAE8B,WAAWzC,SAASN,EAAAA,EAAAA,GAAEO,EAAEY,IAAI,CAACI,eAAehB,IAAI6C,OAAO,MAAMF,UAAU,KAAKH,WAAW,SAAS,GAAG,MAAM9B,EAAE,OAAOR,EAAE4D,OAAO,GAAG5D,EAAE,IAAIA,EAAE4D,QAAQ/D,EAAE,CAAC,MAAMN,QAAQM,EAAEgF,YAAY,GAAI,OAADtF,QAAC,IAADA,GAAAA,EAAGqE,OAAO5D,EAAE4D,OAAOrE,EAAEqE,OAAOG,IAAI9D,OAAO,KAAA6E,EAAC,MAAMvF,QAAQa,EAAER,qBAAqBY,GAAGR,EAAE4D,OAAQ,OAADrE,QAAC,IAADA,GAAS,QAARuF,EAADvF,EAAGqE,cAAM,IAAAkB,OAAA,EAATA,EAAWf,IAAI9D,EAAE,CAAC,CAAC,GAAGD,EAAE4D,OAAO,IAAI,MAAMrE,KAAKS,EAAE4D,OAAOrE,EAAEmB,IAAG,GAAAqE,OAAIvE,EAAC,KAAAuE,OAAIxF,EAAE2B,IAAK,OAAOlB,CAAC,C,8ICAxoBG,eAAe4C,EAAExD,IAAIA,EAAE+C,YAAY/C,EAAE+C,sBAAsBzC,EAAAA,UAAIN,EAAE,IAAIA,EAAE+C,WAAW,IAAIzC,EAAAA,QAAEN,EAAE+C,cAAc,MAAMxC,QAA+FK,eAAiBZ,SAASA,EAAEuC,OAAO,MAAMhC,EAAE,IAAIE,EAAAA,EAAE,OAAikBG,eAAiBZ,GAAG,MAAMO,EAAEP,EAAEyF,UAAUhF,EAAEQ,EAAAA,EAAEV,GAAG,MAAM,CAACN,kBAAkBQ,IAAIiF,WAAW1F,EAAE0F,WAAW,CAA9pBhC,OAAQiC,EAAE3F,EAAEO,GAAG,CAA9J0B,CAAEjC,EAAE+C,YAAY,OAAO,MAAMxC,EAAEN,aAAa,CAAC8C,WAAW/C,EAAE+C,cAAcxC,EAAEmF,YAAY,CAAyE9E,eAAe+E,EAAEpF,EAAEE,GAAG,OAAOF,EAAEsC,MAAM,IAAI,cAAc,OAAwlBjC,eAAiBZ,EAAEO,GAAG,aAA8sEK,eAAiBZ,EAAEO,GAAG,aAAaA,EAAEF,qBAAqBL,EAAEmB,MAAMyE,QAAQ,CAA3wEC,CAAE7F,EAAEO,GAAG,CAACkF,UAAU,aAAa,CAACA,UAAU,gBAAgB,CAA9qBK,CAAEvF,EAAEE,GAAG,IAAI,kBAAkB,OAAkpBG,eAAiBZ,EAAEO,GAAG,MAAME,QAAQsF,EAAE/F,EAAEO,GAAG,GAAG,iBAAiBE,EAAE,CAAC,MAAMT,EAAE,CAAC,EAAE,OAAO,MAAMS,EAAEkB,KAAK3B,EAAEqB,QAAQZ,EAAEkB,IAAI,CAAC8D,UAAUhF,EAAEgF,WAAW,eAAeC,WAAW1F,EAAE,CAAC,MAAM,CAACyF,UAAU,aAAa,CAA/0BO,CAAEzF,EAAEE,GAAG,IAAI,qBAAqB,OAAo8CG,eAAiBZ,SAASA,EAAEuC,OAAO,MAAMhC,GAAE8C,EAAAA,EAAAA,IAAErD,EAAE,aAAaS,GAAE4C,EAAAA,EAAAA,IAAErD,EAAE,UAAU,GAAGO,GAAGE,EAAE,MAAM,CAACgF,UAAU,iBAAiB,IAAGpC,EAAAA,EAAAA,IAAErD,EAAE,eAAe,MAAM,CAACyF,UAAU,cAAc,MAAM/E,QAAQV,EAAEsF,YAAY,OAAO,KAAI9D,EAAAA,EAAAA,IAAEd,GAAG,CAAC+E,UAAU,gBAAgB,CAACA,UAAU,aAAa,CAAvsDQ,CAAE1F,GAAG,IAAI,gBAAgB,OAAgxBK,eAAiBZ,EAAES,GAAG,MAAMQ,QAAQ8E,EAAE/F,EAAES,GAAGG,UAAU,IAAG,IAAAsF,EAAC,IAAIlG,EAAEmB,IAAI,MAAM,GAAG,MAAM+B,UAAUxC,SAASH,EAAAA,EAAAA,GAAEP,EAAEmB,IAAI,CAACI,eAAevB,IAAIiB,QAAQR,EAAEJ,qBAAqBK,GAAG,OAAgB,QAAhBwF,EAAQ,OAADjF,QAAC,IAADA,OAAC,EAADA,EAAGoD,cAAM,IAAA6B,EAAAA,EAAE,EAAE,CAAC,MAAM,MAAM,EAAE,KAAK,GAAG,iBAAiBjF,EAAE,KAAAkF,EAAC,MAAM5F,EAAE,CAAC,EAAE,IAAID,EAAE,GAAG,MAAMW,EAAEU,IAAIpB,EAAEc,QAAQJ,EAAEU,GAAGrB,EAAC,GAAAkF,OAAIxF,EAAEmB,IAAG,YAAAqE,OAAWvE,EAAEU,KAAMrB,EAAEN,EAAEmB,IAAkB,QAAfgF,EAACnG,EAAEoG,oBAAY,IAAAD,GAAdA,EAAgBnC,OAAO,IAAI,MAAMvD,KAAK4F,OAAOC,KAAK5F,EAAAA,IAAG,GAAGV,EAAEoG,aAAaG,SAAS9F,GAAG,MAAM,CAACgF,UAAU/E,EAAAA,GAAED,IAAI,MAAMe,QAAQf,EAAEJ,qBAAqBC,GAAG,MAAM,CAACmF,UAAU/E,EAAAA,GAAG,OAADc,QAAC,IAADA,OAAC,EAADA,EAAG0C,YAAY,aAAawB,WAAWnF,EAAE,CAAC,IAAG,IAAKU,EAAE,CAAC,MAAMV,QAAQE,EAAEJ,qBAAqBL,EAAEmB,KAAK,GAAG,WAAW,OAADZ,QAAC,IAADA,OAAC,EAADA,EAAG2D,WAAU,MAAM,CAACuB,UAAU,aAAa,CAAC,MAAM,CAACA,UAAU,aAAa,CAA55Ce,CAAEjG,EAAEE,GAAG,IAAI,gBAAgB,OAA6oDG,eAAiBZ,EAAEO,GAAE,IAAAkG,EAAAC,EAAAC,EAAAC,QAAO5G,EAAEuC,OAAO,MAAM9B,EAA2C,QAA1CgG,EAAe,QAAfC,EAAC1G,EAAEoG,oBAAY,IAAAM,OAAA,EAAdA,EAAgBlC,KAAKxE,GAAGA,EAAE6G,uBAAe,IAAAJ,EAAAA,EAAE,GAAG,GAAGhG,EAAE8F,SAAS,sBAAsB,MAAM,CAACd,UAAU,kBAAkB,GAAGhF,EAAE8F,SAAS,iBAAiB,MAAM,CAACd,UAAU,oBAAoB,MAAM/E,QAAQV,EAAEsF,YAAYrE,EAAG,OAADP,QAAC,IAADA,OAAC,EAADA,EAAGwD,UAAU,GAAG,iCAAiCjD,EAAE,MAAM,CAACwE,UAAU,oBAAoB,GAAG,4BAA4BxE,EAAE,MAAM,CAACwE,UAAU,gBAAgB,MAAMnF,QAAQC,EAAEF,qBAAqBL,EAAEmB,KAAKK,EAAa,QAAZmF,EAACrG,EAAEwG,iBAAS,IAAAH,OAAA,EAAXA,EAAaE,cAAc7F,EAAgB,QAAf4F,EAACtG,EAAEyG,oBAAY,IAAAH,OAAA,EAAdA,EAAgBC,cAAcN,SAAS,aAAa,MAAM,QAAQ/E,GAAGR,EAAE,CAACyE,UAAU,oBAAoB,CAACA,UAAU,eAAe,CAA/uEuB,CAAEzG,EAAEE,GAAG,IAAI,iBAAoM,IAAI,OAAO,MAAw4E,CAACgF,UAAU,eAAtkF,IAAI,sBAAsB,MAA+uE,CAACA,UAAU,mBAA/uE,IAAI,UAAU,MAAuwE,CAACA,UAAU,gBAAvwE,IAAI,MAAM,MAAgyE,CAACA,UAAU,YAAhyE,IAAI,MAAM,MAAqzE,CAACA,UAAU,YAArzE,IAAI,MAAM,MAA00E,CAACA,UAAU,YAA10E,IAAI,OAAO,MAAw4E,CAACA,UAAU,aAAx4E,IAAI,MAAM,MAAy0E,CAACA,UAAU,YAAnzE,IAAI,cAAc,MAAw5E,CAACA,UAAU,cAAx5E,QAAQ,MAAM,IAAIzF,EAAAA,EAAE,2BAA2B,8BAA8B,CAAC6C,KAAKtC,EAAEsC,OAAO,CAAq5EjC,eAAemF,EAAE/F,EAAEO,EAAEE,GAAG,MAAMC,EAAEV,EAAEmB,IAAI,IAAIT,GAAG,SAASuG,KAAKvG,GAAG,MAAM,CAAC,QAAQV,EAAEuC,OAAO,IAAItB,QAAQjB,EAAEsF,YAAY,GAAG,oBAAoBtF,EAAE6C,KAAK,CAAC,MAAM7C,QAAQgB,EAAAA,EAAAA,IAAEC,EAAEP,EAAEH,GAAGE,EAAEyG,EAAElH,GAAG,GAAG,iBAAiBS,EAAE,CAAC,MAAMF,GAAEmB,EAAAA,EAAAA,IAAE1B,GAAGU,GAAE2B,EAAAA,EAAAA,IAAErC,GAAGS,EAAEgF,UAAU,MAAMhF,EAAEkB,IAAIpB,EAAEgG,SAAS9F,EAAEkB,IAAI,oBAAoB,MAAMlB,EAAEkB,IAAK,OAADjB,QAAC,IAADA,GAAAA,EAAG6F,SAAS9F,EAAEkB,IAAI,uBAAuB,cAAc,CAAC,OAAOlB,CAAC,CAA8C,GAA7C,kBAAkBT,EAAE6C,OAAO5B,QAAQJ,EAAAA,EAAAA,IAAEb,EAAEiB,EAAEV,KAAOiB,EAAAA,EAAAA,IAAEP,GAAG,EAAE,OAAOiG,EAAEjG,GAAG,MAAMX,QAAQC,EAAEF,qBAAqBK,GAAG,OAAOD,IAAIH,EAAE+D,aAAa5D,KAAKyG,EAAE5G,EAAE,CAAC,SAAS4G,EAAElH,GAAG,OAAO,KAAIwB,EAAAA,EAAAA,IAAExB,IAAI,CAAC2B,IAAGmB,EAAAA,EAAAA,IAAE9C,GAAG,C,kDCAp2IY,eAAeF,EAAEA,EAAEM,GAAG,MAAMoB,KAAK3B,SAAST,EAAAA,EAAAA,GAAEU,EAAE,CAACwB,aAAa,OAAOF,MAAM,CAACC,EAAE,UAAW,OAADjB,QAAC,IAADA,OAAC,EAADA,EAAGmG,iBAAiBlE,MAAO,OAADjC,QAAC,IAADA,OAAC,EAADA,EAAGY,UAAU,OAAOnB,CAAC,C","sources":["../node_modules/@arcgis/core/layers/support/LayerLoadContext.js","../node_modules/@arcgis/core/layers/support/associatedFeatureServiceUtils.js","../node_modules/@arcgis/core/portal/support/loadUtils.js","../node_modules/@arcgis/core/portal/support/portalLayers.js","../node_modules/@arcgis/core/support/requestPresets.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{fetchArcGISServiceJSON as t}from\"../../support/requestPresets.js\";class e{constructor(){this._serviceMetadatas=new Map}async fetchServiceMetadata(e,s){const a=this._serviceMetadatas.get(e);if(a)return a;const r=await t(e,s);return this._serviceMetadatas.set(e,r),r}}export{e as LayerLoadContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{id as r}from\"../../kernel.js\";import e from\"../../request.js\";import n from\"../../core/Error.js\";import{throwIfAbortError as t}from\"../../core/promiseUtils.js\";import{parse as o}from\"./arcgisLayerUrl.js\";import a from\"../../portal/Portal.js\";import i from\"../../portal/PortalItem.js\";async function l(r,e){const t=o(r);if(!t)throw new n(\"invalid-url\",\"Invalid scene service url\");const a={...e,sceneServerUrl:t.url.path,layerId:t.sublayer??void 0};if(a.sceneLayerItem??=await s(a),null==a.sceneLayerItem)return f(a.sceneServerUrl.replace(\"/SceneServer\",\"/FeatureServer\"),a);const i=await y(a);if(!i?.url)throw new n(\"related-service-not-found\",\"Could not find feature service through portal item relationship\");const l=await f(i.url,a);return l.portalItem=i,l}async function s(r){const e=(await c(r)).serviceItemId;if(!e)return null;const n=new i({id:e,apiKey:r.apiKey}),o=await u(r);null!=o&&(n.portal=new a({url:o}));try{return n.load({signal:r.signal})}catch(l){return t(l),null}}async function c(r){if(r.rootDocument)return r.rootDocument;const n={query:{f:\"json\",token:r.apiKey},responseType:\"json\",signal:r.signal};try{const t=await e(r.sceneServerUrl,n);r.rootDocument=t.data}catch{r.rootDocument={}}return r.rootDocument}async function u(n){const o=r?.findServerInfo(n.sceneServerUrl);if(o?.owningSystemUrl)return o.owningSystemUrl;const a=n.sceneServerUrl.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";try{const r=(await e(a,{query:{f:\"json\"},responseType:\"json\",signal:n.signal})).data.owningSystemUrl;if(r)return r}catch(i){t(i)}return null}async function f(r,t){const a=o(r);if(!a)throw new n(\"invalid-feature-service-url\",\"Invalid feature service url\");const i=a.url.path,l=t.layerId;if(null==l)return{serverUrl:i};const s=c(t),u=r=>{const n={query:{f:\"json\"},responseType:\"json\",authMode:r,signal:t.signal};return e(i,n)},f=u(\"anonymous\").catch((()=>u(\"no-prompt\"))),[y,m]=await Promise.all([f,s]),p=m?.layers,d=y.data&&y.data.layers;if(!Array.isArray(d))throw new Error(\"expected layers array\");if(Array.isArray(p))for(let e=0;e<Math.min(p.length,d.length);e++){if(p[e].id===l)return{serverUrl:i,layerId:d[e].id}}else if(null!=l&&l<d.length)return{serverUrl:i,layerId:d[l].id};throw new Error(\"could not find matching associated sublayer\")}async function y({sceneLayerItem:r,signal:e}){if(!r)return null;try{const n=(await r.fetchRelatedItems({relationshipType:\"Service2Service\",direction:\"reverse\"},{signal:e})).find((r=>\"Feature Service\"===r.type))||null;if(!n)return null;const t=new i({portal:n.portal,id:n.id});return await t.load(),t}catch(n){return t(n),null}}export{l as findAssociatedFeatureService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{findAssociatedFeatureService as e}from\"../../layers/support/associatedFeatureServiceUtils.js\";function t(e){const t={id:e.id,name:e.name};return\"Oriented Imagery Layer\"===e.type&&(t.layerType=\"OrientedImageryLayer\"),t}async function a(e,a,r){if(null==e?.layers||null==e?.tables){const l=await r.fetchServiceMetadata(a);(e=e||{}).layers=e.layers||l?.layers?.map(t),e.tables=e.tables||l?.tables?.map(t)}return e}function r(e){const t=e.layers;if(t?.length)return t[0].id;const a=e.tables;return a?.length?a[0].id:null}function l(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function n(e){const t=[];return e?.layers?.forEach((e=>{\"SubtypeGroupLayer\"===e.layerType&&t.push(e.id)})),t}function s(e){return e?.layers?.filter((({layerType:e})=>\"OrientedImageryLayer\"===e)).map((({id:e})=>e))}async function i(a,r,l){if(!a?.url)return r??{};if(r??={},!r.layers){const e=await l.fetchServiceMetadata(a.url);r.layers=e.layers?.map(t)}const{serverUrl:n,portalItem:s}=await e(a.url,{sceneLayerItem:a}).catch((()=>({serverUrl:null,portalItem:null})));if(null==n)return r.tables=[],r;if(!r.tables&&s){const e=await s.fetchData();if(e?.tables)r.tables=e.tables.map(t);else{const e=await l.fetchServiceMetadata(n);r.tables=e?.tables?.map(t)}}if(r.tables)for(const e of r.tables)e.url=`${n}/${e.id}`;return r}export{t as createSublayerData,r as getFirstLayerOrTableId,l as getNumLayersAndTables,s as getOrientedImageryLayerIds,n as getSubtypeGroupLayerIds,i as populateSceneServiceItemData,a as preprocessFSItemData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{findAssociatedFeatureService as a}from\"../../layers/support/associatedFeatureServiceUtils.js\";import{LayerLoadContext as r}from\"../../layers/support/LayerLoadContext.js\";import{sceneServiceLayerTypeToClassName as t}from\"../../layers/support/layerUtils.js\";import{layerLookupMap as n}from\"../../layers/support/lazyLayerLoader.js\";import s from\"../PortalItem.js\";import{getNumLayersAndTables as c,preprocessFSItemData as o,getSubtypeGroupLayerIds as i,getOrientedImageryLayerIds as u,populateSceneServiceItemData as l,getFirstLayerOrTableId as y}from\"./loadUtils.js\";import{hasTypeKeyword as m}from\"./portalItemUtils.js\";async function p(e){!e.portalItem||e.portalItem instanceof s||(e={...e,portalItem:new s(e.portalItem)});const a=await f(e.portalItem);return new(0,a.constructor)({portalItem:e.portalItem,...a.properties})}async function f(e){await e.load();const a=new r;return d(await L(e,a))}async function L(a,r){switch(a.type){case\"Map Service\":return w(a,r);case\"Feature Service\":return S(a,r);case\"Feature Collection\":return I(a);case\"Scene Service\":return N(a,r);case\"Image Service\":return v(a,r);case\"Stream Service\":return M();case\"Vector Tile Service\":return h();case\"GeoJson\":return T();case\"CSV\":return g();case\"KML\":return j();case\"WFS\":return F();case\"WMTS\":return b();case\"WMS\":return G();case\"Feed\":return C();case\"Group Layer\":return U();default:throw new e(\"portal:unknown-item-type\",\"Unknown item type '${type}'\",{type:a.type})}}async function d(e){const a=e.className,r=n[a];return{constructor:await r(),properties:e.properties}}async function w(e,a){return await V(e,a)?{className:\"TileLayer\"}:{className:\"MapImageLayer\"}}async function S(e,a){const r=await W(e,a);if(\"object\"==typeof r){const e={};return null!=r.id&&(e.layerId=r.id),{className:r.className||\"FeatureLayer\",properties:e}}return{className:\"GroupLayer\"}}async function N(e,r){const n=await W(e,r,(async()=>{try{if(!e.url)return[];const{serverUrl:t}=await a(e.url,{sceneLayerItem:e}),n=await r.fetchServiceMetadata(t);return n?.tables??[]}catch{return[]}}));if(\"object\"==typeof n){const a={};let s;if(null!=n.id?(a.layerId=n.id,s=`${e.url}/layers/${n.id}`):s=e.url,e.typeKeywords?.length)for(const r of Object.keys(t))if(e.typeKeywords.includes(r))return{className:t[r]};const c=await r.fetchServiceMetadata(s);return{className:t[c?.layerType]||\"SceneLayer\",properties:a}}if(!1===n){const a=await r.fetchServiceMetadata(e.url);if(\"Voxel\"===a?.layerType)return{className:\"VoxelLayer\"}}return{className:\"GroupLayer\"}}async function I(e){await e.load();const a=m(e,\"Map Notes\"),r=m(e,\"Markup\");if(a||r)return{className:\"MapNotesLayer\"};if(m(e,\"Route Layer\"))return{className:\"RouteLayer\"};const t=await e.fetchData();return 1===c(t)?{className:\"FeatureLayer\"}:{className:\"GroupLayer\"}}async function v(e,a){await e.load();const r=e.typeKeywords?.map((e=>e.toLowerCase()))??[];if(r.includes(\"elevation 3d layer\"))return{className:\"ElevationLayer\"};if(r.includes(\"tiled imagery\"))return{className:\"ImageryTileLayer\"};const t=await e.fetchData(),n=t?.layerType;if(\"ArcGISTiledImageServiceLayer\"===n)return{className:\"ImageryTileLayer\"};if(\"ArcGISImageServiceLayer\"===n)return{className:\"ImageryLayer\"};const s=await a.fetchServiceMetadata(e.url),c=s.cacheType?.toLowerCase(),o=s.capabilities?.toLowerCase().includes(\"tilesonly\");return\"map\"===c||o?{className:\"ImageryTileLayer\"}:{className:\"ImageryLayer\"}}function M(){return{className:\"StreamLayer\"}}function h(){return{className:\"VectorTileLayer\"}}function T(){return{className:\"GeoJSONLayer\"}}function g(){return{className:\"CSVLayer\"}}function j(){return{className:\"KMLLayer\"}}function F(){return{className:\"WFSLayer\"}}function G(){return{className:\"WMSLayer\"}}function b(){return{className:\"WMTSLayer\"}}function C(){return{className:\"StreamLayer\"}}function U(){return{className:\"GroupLayer\"}}async function V(e,a){return(await a.fetchServiceMetadata(e.url)).tileInfo}async function W(e,a,r){const t=e.url;if(!t||/\\/\\d+$/.test(t))return{};await e.load();let n=await e.fetchData();if(\"Feature Service\"===e.type){const e=await o(n,t,a),r=K(e);if(\"object\"==typeof r){const a=i(e),t=u(e);r.className=null!=r.id&&a.includes(r.id)?\"SubtypeGroupLayer\":null!=r.id&&t?.includes(r.id)?\"OrientedImageryLayer\":\"FeatureLayer\"}return r}\"Scene Service\"===e.type&&(n=await l(e,n,a));if(c(n)>0)return K(n);const s=await a.fetchServiceMetadata(t);return r&&(s.tables=await r()),K(s)}function K(e){return 1===c(e)&&{id:y(e)}}export{p as fromItem,L as selectLayerClassPath};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,o){const{data:r}=await e(t,{responseType:\"json\",query:{f:\"json\",...o?.customParameters,token:o?.apiKey}});return r}export{t as fetchArcGISServiceJSON};\n"],"names":["e","constructor","this","_serviceMetadatas","Map","fetchServiceMetadata","s","a","get","r","t","set","async","l","_t$sublayer","_a$sceneLayerItem","o","n","sceneServerUrl","url","path","layerId","sublayer","sceneLayerItem","c","serviceItemId","i","id","apiKey","findServerInfo","owningSystemUrl","replace","query","f","responseType","signal","data","u","portal","load","_ref","fetchRelatedItems","relationshipType","direction","find","type","y","portalItem","rootDocument","token","serverUrl","authMode","catch","m","Promise","all","p","layers","d","Array","isArray","Error","Math","min","length","name","layerType","_e","_e2","tables","_l$layers","_l$tables","map","_e$layers$length","_e$layers","_e$tables$length","_e$tables","_e$layers2","forEach","push","_e$layers3","filter","_ref2","_r","_r2","_e$layers4","fetchData","_e$tables2","concat","className","properties","L","tileInfo","V","w","W","S","I","_n$tables","_e$typeKeywords","typeKeywords","Object","keys","includes","N","_e$typeKeywords$map","_e$typeKeywords2","_s$cacheType","_s$capabilities","toLowerCase","cacheType","capabilities","v","test","K","customParameters"],"sourceRoot":""}