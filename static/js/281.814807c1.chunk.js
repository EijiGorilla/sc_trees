"use strict";(self.webpackChunksc_trees=self.webpackChunksc_trees||[]).push([[281],{80457:(e,t,n)=>{n.d(t,{Z:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.lengths=e??[],this.coords=t??[],this.hasIndeterminateRingOrder=n}static fromJSON(e){return new i(e.lengths,e.coords,e.hasIndeterminateRingOrder)}static fromRect(e){const[t,n,r,o]=e,l=r-t,a=o-n;return new i([5],[t,n,l,0,0,a,-l,0,0,-a])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const i=this.lengths[n];for(let n=0;n<i;n++)e(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=i}}deltaDecode(){const e=this.clone(),{coords:t,lengths:n}=e;let i=0;for(const r of n){for(let e=1;e<r;e++)t[2*(i+e)]+=t[2*(i+e)-2],t[2*(i+e)+1]+=t[2*(i+e)-1];i+=r}return e}clone(e){if(0===this.lengths.length)return new i([],[this.coords[0],this.coords[1]]);const t=2*(0===this.lengths.length?1:this.lengths.reduce(((e,t)=>e+t))),n=this.coords.slice(0,t);return e?(e.set(n),new i(this.lengths,e,this.hasIndeterminateRingOrder)):new i(Array.from(this.lengths),Array.from(n),this.hasIndeterminateRingOrder)}}},59001:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(82272),r=n(51e3);class o{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,t){const n=this._resourceMap.get(e);if(n)return{width:n.width,height:n.height};let i=this._inFlightResourceMap.get(e);return i?i.then((e=>({width:e.width,height:e.height}))):(i=(0,r.n$)(e,t),this._inFlightResourceMap.set(e,i),i.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return(0,i.mx)(e)}}},48202:(e,t,n)=>{var i,r,o,l,a,s,c,u,h,d,g,f,p,m,y,C,R,S,M,T,w,P,v,B,O,L,b,F,N,A,D,E,x,W,I,_,k,U,G,H,z,J,Z,q,X,$,Y,V,Q,j,K,ee,te,ne,ie,re,oe,le,ae,se,ce;n.d(t,{$y:()=>P,AH:()=>r,CS:()=>Y,DD:()=>u,Dd:()=>N,Em:()=>w,JS:()=>X,Ky:()=>h,Lh:()=>V,Qb:()=>oe,RL:()=>i,RS:()=>ae,TF:()=>T,Tx:()=>a,UR:()=>R,UX:()=>re,bj:()=>$,eZ:()=>c,id:()=>O,kP:()=>_,of:()=>g,r4:()=>H,sj:()=>k,v2:()=>o,zQ:()=>F,zV:()=>C}),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(o||(o={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(l||(l={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(a||(a={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(s||(s={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(c||(c={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(u||(u={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(h||(h={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(d||(d={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(g||(g={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(f||(f={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(p||(p={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(m||(m={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(y||(y={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(C||(C={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(R||(R={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(S||(S={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(M||(M={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(T||(T={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks"}(w||(w={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(P||(P={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(v||(v={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(B||(B={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(O||(O={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(L||(L={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(b||(b={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(F||(F={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(N||(N={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(A||(A={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(D||(D={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(E||(E={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(x||(x={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(W||(W={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(I||(I={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(_||(_={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(k||(k={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(U||(U={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(G||(G={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(H||(H={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(z||(z={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(J||(J={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(Z||(Z={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(q||(q={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(X||(X={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}($||($={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(Y||(Y={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(V||(V={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(Q||(Q={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(j||(j={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(K||(K={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(ee||(ee={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(te||(te={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(ne||(ne={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ie||(ie={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(re||(re={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(oe||(oe={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(le||(le={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(ae||(ae={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(se||(se={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(ce||(ce={}))},60975:(e,t,n)=>{n.d(t,{previewCIMSymbol:()=>C});var i=n(17842),r=n(78915),o=n(59001),l=n(28222),a=n(41015),s=n(31027);function c(e,t,n,i){const r=-t/2+1,o=t/2-1,l=n/2-1,a=-n/2+1;switch(e){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[r,0],[0,0],[o,0]]]};default:return"legend"===i?{rings:[[[r,l],[o,0],[o,a],[r,a],[r,l]]]}:{rings:[[[r,l],[o,l],[o,a],[r,a],[r,l]]]}}}var u=n(37817),h=n(69157);const d=new class{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new o.Z}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,n,i,o,l,u,h,d){if(!e)return null;const{data:g}=e;if(!g||"CIMSymbolReference"!==g.type||!g.symbol)return null;const{symbol:f}=g;l||(l=(0,s.JW)(f));const p=await a.E.resolveSymbolOverrides(g,t,this._spatialReference,o,l,u,h),m=this._cimResourceManager,y=[];r.B$.fetchResources(p,m,y),r.B$.fetchFonts(p,m,y),y.length>0&&await Promise.all(y);const{width:C,height:R}=n,S=c(l,C,R,i),M=r.B$.getEnvelope(p,S,m);if(!M)return null;let T=1,w=0,P=0;switch(f.type){case"CIMPointSymbol":case"CIMTextSymbol":{let e=1;M.width>C&&(e=C/M.width);let t=1;M.height>R&&(t=R/M.height),"preview"===i&&(M.width<C&&(e=C/M.width),M.height<R&&(t=R/M.height)),T=Math.min(e,t),w=M.x+M.width/2,P=M.y+M.height/2}break;case"CIMLineSymbol":{(d||M.height>R)&&(T=R/M.height),P=M.y+M.height/2;const e=M.x*T+C/2,t=(M.x+M.width)*T+C/2,{paths:n}=S;n[0][0][0]-=e/T,n[0][2][0]-=(t-C)/T}break;case"CIMPolygonSymbol":{w=M.x+M.width/2,P=M.y+M.height/2;const e=M.x*T+C/2,t=(M.x+M.width)*T+C/2,n=M.y*T+R/2,i=(M.y+M.height)*T+R/2,{rings:r}=S;e<0&&(r[0][0][0]-=e,r[0][3][0]-=e,r[0][4][0]-=e),n<0&&(r[0][0][1]+=n,r[0][1][1]+=n,r[0][4][1]+=n),t>C&&(r[0][1][0]-=t-C,r[0][2][0]-=t-C),i>R&&(r[0][2][1]+=i-R,r[0][3][1]+=i-R)}}const v={type:"cim",data:{type:"CIMSymbolReference",symbol:p}};return this.rasterize(v,C,R,w,P,T,l,1,S)}rasterize(e,t,n,i,r,o,a){let u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;const{data:d}=e;if(!d||"CIMSymbolReference"!==d.type||!d.symbol)return null;const{symbol:g}=d,f=this._canvas,p=1.3333333333333333*(window.devicePixelRatio||1);f.width=t*p,f.height=n*p,a||(a=(0,s.JW)(g)),h||(h=c(a,t,n,"legend")),f.width+=2*u,f.height+=2*u;const m=f.getContext("2d",{willReadFrequently:!0}),y=l.zA.createIdentity();return y.translate(-i,-r),y.scale(o*p,-o*p),y.translate(t*p/2+u,n*p/2+u),m.clearRect(0,0,f.width,f.height),new l.cD(m,this._cimResourceManager,y,!0).drawSymbol(g,h),m.getImageData(0,0,f.width,f.height)}}(null),g=(0,i.Wz)(u.b_.size),f=(0,i.Wz)(u.b_.maxSize),p=(0,i.Wz)(u.b_.lineWidth),m=1;async function y(e,t,n){const i=t?.size;let o=null!=i&&"object"==typeof i&&"width"in i?i.width:i,l=null!=i&&"object"==typeof i&&"height"in i?i.height:i;if(null==o||null==l)if("esriGeometryPolygon"===n)o=g,l=g;else{const i=await async function(e,t,n){const{feature:i,fieldMap:o,viewParams:l}=t.cimOptions||t,s=await a.E.resolveSymbolOverrides(e.data,i,null,o,n,null,l);if(!s)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:s},e.data.primitiveOverrides=void 0;const c=[];return r.B$.fetchResources(s,d.resourceManager,c),r.B$.fetchFonts(s,d.resourceManager,c),c.length>0&&await Promise.all(c),r.B$.getEnvelope(s,null,d.resourceManager)}(e,t,n);i&&(o=i.width,l=i.height),"esriGeometryPolyline"===n&&(o=p),o=null!=o&&isFinite(o)?Math.min(o,f):g,l=null!=l&&isFinite(l)?Math.max(Math.min(l,f),m):g}return"legend"===t.style&&"esriGeometryPolyline"===n&&(o=p),{width:o,height:l}}async function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{node:n,opacity:r,symbolConfig:o}=t,l=null!=o&&"object"==typeof o&&"isSquareFill"in o&&o.isSquareFill,a=t.cimOptions||t,c=a.geometryType||(0,s.JW)(e?.data?.symbol),u=await y(e,t,c),{feature:g,fieldMap:f}=a,p=l||"esriGeometryPolygon"!==c?"preview":"legend",m=await d.rasterizeCIMSymbolAsync(e,g,u,p,f,c,null,a.viewParams,a.allowScalingUp);if(!m)return null;const{width:C,height:R}=m,S=document.createElement("canvas");S.width=C,S.height=R,S.getContext("2d").putImageData(m,0,0);const M=(0,i.F2)(u.width),T=(0,i.F2)(u.height),w=new Image(M,T);w.src=S.toDataURL(),w.ariaLabel=t.ariaLabel??null,w.alt=t.ariaLabel??"",null!=r&&(w.style.opacity=`${r}`);let P=w;if(null!=t.effectView){const e={shape:{type:"image",x:0,y:0,width:M,height:T,src:w.src},fill:null,stroke:null,offset:[0,0]};P=(0,h.wh)([[e]],[M,T],{effectView:t.effectView,ariaLabel:t.ariaLabel})}return n&&P&&n.appendChild(P),P}}}]);
//# sourceMappingURL=281.814807c1.chunk.js.map