"use strict";(self.webpackChunksc_trees=self.webpackChunksc_trees||[]).push([[7676],{27676:(e,t,r)=>{r.d(t,{Z:()=>N});var n=r(27366),o=r(7138),i=r(10064),s=r(93169),a=r(66978),u=r(35995),l=r(49861),c=(r(32718),r(84936),r(69912)),d=r(92975),f=r(18277),h=r(64020),p=r(23084),y=r(34211),m=(r(59486),r(5192)),_=r(21149),S=r(53866);var g=r(24246),b=r(77946),x=r(92026),F=r(93501),C=r(83406);function O(e,t){return t}function P(e,t,r,n){switch(r){case 0:return v(e,t+n,0);case 1:return"lowerLeft"===e.originPosition?v(e,t+n,1):function(e,t,r){let{translate:n,scale:o}=e;return n[r]-t*o[r]}(e,t+n,1)}}function R(e,t,r,n){return 2===r?v(e,t,2):P(e,t,r,n)}function w(e,t,r,n){return 2===r?0===t?0:v(e,t,3):P(e,t,r,n)}function D(e,t,r,n){return 3===r?0===t?0:v(e,t,3):R(e,t,r,n)}function v(e,t,r){let{translate:n,scale:o}=e;return n[r]+t*o[r]}class q{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=O,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const t=(0,F.k)(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=t)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,t){const r=e.fields;(0,x.O3)(r),r.push(t);const n=r.map((e=>e.name));this._attributesConstructor=function(){for(const e of n)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:r,queryGeometryType:n}=t,o=(0,C.$g)(r.clone(),r,!1,!1,this._transform),i=(0,C.di)(o,n,!1,!1);e.queryGeometryType=n,e.queryGeometry={...i}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const n=this._transform;switch(t=this._applyTransform(n,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const n=this._transform;return null!==this._mValueOffset&&0===e&&t>0&&!(t%this._mValueOffset)?0:this._applyTransform(n,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const n=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const n=this._transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?D:t?R:r?w:P}}var E=r(49818);async function G(e,t,r){const n=(0,p.en)(e),o={...r},i=_.Z.from(t),s=!i.quantizationParameters,{data:a}=await(0,m.qp)(n,i,new q({sourceSpatialReference:i.sourceSpatialReference,applyTransform:s}),o);return a}let j=class extends o.Z{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,u.mN)(this.url)}async execute(e,t){const r=await this.executeJSON(e,t);return this.featureSetFromJSON(e,r,t)}async executeJSON(e,t){const r=this._normalizeQuery(e),n=null!=e.outStatistics?.[0],o=(0,s.Z)("featurelayer-pbf-statistics"),i=!n||o;let a;if(this.pbfSupported&&i)try{a=await G(this.url,r,t)}catch(u){if("query:parsing-pbf"!==u.name)throw u;this.pbfSupported=!1}return this.pbfSupported&&i||(a=await(0,b.F)(this.url,r,t)),this._normalizeFields(a.fields),a}async featureSetFromJSON(e,t,n){if(!this._queryIs3DObjectFormat(e)||null==this.infoFor3D||!t.features)return E.Z.fromJSON(t);const{meshFeatureSetFromJSON:o}=await(0,a.Hl)(Promise.all([r.e(5158),r.e(7906),r.e(1754),r.e(8074)]).then(r.bind(r,75367)),n);return o(e,this.infoFor3D,t)}executeForCount(e,t){return(0,y.P)(this.url,this._normalizeQuery(e),t)}executeForExtent(e,t){return async function(e,t,r){const n=(0,p.en)(e),o=await(0,m.Vr)(n,_.Z.from(t),{...r}),i=o.data.extent;return!i||isNaN(i.xmin)||isNaN(i.ymin)||isNaN(i.xmax)||isNaN(i.ymax)?{count:o.data.count,extent:null}:{count:o.data.count,extent:S.Z.fromJSON(i)}}(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return(0,g.G)(this.url,this._normalizeQuery(e),t)}async executeRelationshipQuery(e,t){const[{default:n},{executeRelationshipQuery:o}]=await(0,a.Hl)(Promise.all([Promise.resolve().then(r.bind(r,99086)),r.e(2964).then(r.bind(r,12964))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),o(this.url,e,t)}async executeRelationshipQueryForCount(e,t){const[{default:n},{executeRelationshipQueryForCount:o}]=await(0,a.Hl)(Promise.all([Promise.resolve().then(r.bind(r,99086)),r.e(2964).then(r.bind(r,12964))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),o(this.url,e,t)}async executeAttachmentQuery(e,t){const{executeAttachmentQuery:n,fetchAttachments:o,processAttachmentQueryResult:i}=await(0,a.Hl)(r.e(9301).then(r.bind(r,59301)),t),s=(0,p.en)(this.url);return i(s,await(this.queryAttachmentsSupported?n(s,e,t):o(s,e,t)))}async executeBinsQuery(e,t){const{executeBinsQuery:n}=await(0,a.Hl)(r.e(2824).then(r.bind(r,42824)),t);return n(this.parsedUrl,e,t)}async executeTopFeaturesQuery(e,t){const{executeTopFeaturesQuery:n}=await(0,a.Hl)(r.e(2200).then(r.bind(r,82200)),t);return n(this.parsedUrl,e,this.sourceSpatialReference,t)}async executeForTopIds(e,t){const{executeForTopIds:n}=await(0,a.Hl)(r.e(5182).then(r.bind(r,75182)),t);return n(this.parsedUrl,e,t)}async executeForTopExtents(e,t){const{executeForTopExtents:n}=await(0,a.Hl)(r.e(5641).then(r.bind(r,55641)),t);return n(this.parsedUrl,e,t)}async executeForTopCount(e,t){const{executeForTopCount:n}=await(0,a.Hl)(r.e(9406).then(r.bind(r,19406)),t);return n(this.parsedUrl,e,t)}_normalizeQuery(e){let t=_.Z.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?h.n.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(null!=r&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;const n=(0,f.X4)(r),o=(0,f.fe)(r);for(const e of r.queryFormats){if(e===n){t.formatOf3DObjects=e;break}e!==o||t.formatOf3DObjects||(t.formatOf3DObjects=e)}if(!t.formatOf3DObjects)throw new i.Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(t.outSpatialReference&&!(0,d.fS)(t.outSpatialReference,this.sourceSpatialReference))throw new i.Z("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(null==t.outFields||!t.outFields.includes("*")){t=t===e?t.clone():t,null==t.outFields&&(t.outFields=[]);const{originX:n,originY:o,originZ:i,translationX:s,translationY:a,translationZ:u,scaleX:l,scaleY:c,scaleZ:d,rotationX:f,rotationY:h,rotationZ:p,rotationDeg:y}=r.transformFieldRoles;t.outFields.push(n,o,i,s,a,u,l,c,d,f,h,p,y)}}return t}_normalizeFields(e){if(null!=this.fieldsIndex&&null!=e)for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return null!=this.infoFor3D&&!0===e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};(0,n._)([(0,l.Cb)({type:h.n})],j.prototype,"dynamicDataSource",void 0),(0,n._)([(0,l.Cb)()],j.prototype,"fieldsIndex",void 0),(0,n._)([(0,l.Cb)()],j.prototype,"gdbVersion",void 0),(0,n._)([(0,l.Cb)()],j.prototype,"infoFor3D",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],j.prototype,"parsedUrl",null),(0,n._)([(0,l.Cb)()],j.prototype,"pbfSupported",void 0),(0,n._)([(0,l.Cb)()],j.prototype,"queryAttachmentsSupported",void 0),(0,n._)([(0,l.Cb)()],j.prototype,"sourceSpatialReference",void 0),(0,n._)([(0,l.Cb)({type:String})],j.prototype,"url",void 0),j=(0,n._)([(0,c.j)("esri.layers.graphics.sources.support.QueryTask")],j);const N=j},18277:(e,t,r)=>{r.d(t,{$6:()=>x,$z:()=>i,F7:()=>o,S0:()=>s,Wr:()=>y,X4:()=>d,Zq:()=>f,d1:()=>u,dm:()=>l,eP:()=>c,fe:()=>h,sg:()=>p});const n=[["binary","application/octet-stream","bin",""]];function o(e,t){return null!=_(t.name,e?.supportedFormats??[])}function i(e,t){if(!e)return!1;const r=l(t,e.supportedFormats??[]);return null!=r&&e.editFormats.includes(r)}function s(e,t){return S(function(e,t){const r=e.toLowerCase();return m(t).find((e=>g(e)===r))}(e,t))}function a(e,t){return S(_(e,t))}function u(e,t){return g(function(e,t){return m(t).find((t=>S(t)===e))}(e,t))}function l(e,t){return a(e.name,t)??s(e.type,t)}function c(e,t,r){return s(e,r)??a(t,r)}function d(e){let{supportedFormats:t}=e;return c("model/gltf-binary","glb",t)}function f(e){const t=d(e);return null!=t&&e.editFormats.includes(t)}function h(e){let{supportedFormats:t}=e;return c("model/gltf+json","gltf",t)}function p(e){let{supportedFormats:t}=e;return c("application/esri3do-SR_world","wld",t)}function y(e){let{supportedFormats:t}=e;return c("application/esri3do-SR_prj","prj",t)}function m(e){return[...n,...e]}function _(e,t){const r=e.toLowerCase();return m(t).find((e=>b(e).some((e=>r.endsWith(e)))))}function S(e){return e?.[0]}function g(e){return e?.[1].toLowerCase()}function b(e){return e?.[2].split(",").map((e=>e.toLowerCase()))??[]}function x(e){return e.tables?.find((e=>"assetMaps"===e.role))}},22585:(e,t,r)=>{function n(e){const t={};for(const r in e){if("declaredClass"===r)continue;const o=e[r];if(null!=o&&"function"!=typeof o)if(Array.isArray(o)){t[r]=[];for(let e=0;e<o.length;e++)t[r][e]=n(o[e])}else"object"==typeof o?o.toJSON&&(t[r]=JSON.stringify(o)):t[r]=o}return t}r.d(t,{A:()=>n})},34211:(e,t,r)=>{r.d(t,{P:()=>s});var n=r(23084),o=r(5192),i=r(21149);async function s(e,t,r){const s=(0,n.en)(e),{data:a}=await(0,o.hH)(s,i.Z.from(t),r);return a.count}},24246:(e,t,r)=>{r.d(t,{G:()=>s});var n=r(23084),o=r(5192),i=r(21149);async function s(e,t,r){const s=(0,n.en)(e),{data:a}=await(0,o.Ev)(s,i.Z.from(t),r);return a.objectIds}},77946:(e,t,r)=>{r.d(t,{F:()=>u,e:()=>a});var n=r(23084),o=r(5192),i=r(49818),s=r(21149);async function a(e,t,r){const n=await u(e,t,r);return i.Z.fromJSON(n)}async function u(e,t,r){const i=(0,n.en)(e),a={...r},u=s.Z.from(t),{data:l}=await(0,o.JT)(i,u,u.sourceSpatialReference,a);return l}},5192:(e,t,r)=>{r.d(t,{Ev:()=>m,JT:()=>h,Vr:()=>S,hH:()=>_,n7:()=>y,qp:()=>p});var n=r(76200),o=r(35995),i=r(77981),s=r(91340),a=r(92975),u=r(22585),l=r(27607),c=r(68620);const d="Layer does not support extent calculation.";function f(e,t){const r=e.geometry,n=e.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const o=n;let s,u,l;if(null!=r&&(u=r.spatialReference,l=(0,a.B9)(u),o.geometryType=(0,i.Ji)(r),o.geometry=function(e,t){if(t&&"extent"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&"point"===e.type)return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}(r,e.compactGeometryEnabled),o.inSR=l),n.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(o.objectIds=n.objectIds.join(",")),n.orderByFields&&(o.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete o.outFields:n.outFields.includes("*")?o.outFields="*":o.outFields=n.outFields.join(","),n.outSR?(o.outSR=(0,a.B9)(n.outSR),s=e.outSpatialReference):r&&(n.returnGeometry||n.returnCentroid)&&(o.outSR=o.inSR,s=u),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(o.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(o.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(o.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&null!=u&&null!=e.quantizationParameters?.extent&&u.equals(e.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,o.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(o.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(o.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(o.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const e=n.timeExtent,{start:t,end:r}=e;null==t&&null==r||(o.time=t===r?t:`${t??"null"},${r??"null"}`),delete n.timeExtent}return e.defaultSpatialReferenceEnabled&&null!=u&&null!=s&&u.equals(s)&&(o.defaultSR=o.inSR,delete o.inSR,delete o.outSR),o}async function h(e,t,r,n){const o=null!=t.timeExtent&&t.timeExtent.isEmpty?{data:{features:[]}}:await g(e,t,"json",n);return(0,c.p)(t,r,o.data),o}async function p(e,t,r,n){if(null!=t.timeExtent&&t.timeExtent.isEmpty)return{data:r.createFeatureResult()};const o=await y(e,t,n),i=o;return i.data=(0,l.C)(o.data,r),i}function y(e,t,r){return g(e,t,"pbf",r)}function m(e,t,r){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):g(e,t,"json",r,{returnIdsOnly:!0})}function _(e,t,r){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):g(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}async function S(e,t,r){if(null!=t.timeExtent&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const n=await g(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),o=n.data;if(o.hasOwnProperty("extent"))return n;if(o.features)throw new Error(d);if(o.hasOwnProperty("count"))throw new Error(d);return n}async function g(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const l="string"==typeof e?(0,o.mN)(e):e,c=t.geometry?[t.geometry]:[],d=await(0,s.aX)(c,null,{signal:i.signal}),h=d?.[0];null!=h&&((t=t.clone()).geometry=h);const p=(0,u.A)({...l.query,f:r,...a,...f(t,a)});return(0,n.Z)((0,o.v_)(l.path,(y=a,null==t.formatOf3DObjects||y.returnCountOnly||y.returnExtentOnly||y.returnIdsOnly?"query":"query3d")),{...i,responseType:"pbf"===r?"array-buffer":"json",query:{...p,...i.query}});var y}}}]);
//# sourceMappingURL=7676.a7509339.chunk.js.map